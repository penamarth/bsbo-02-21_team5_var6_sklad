@startuml

class Stock {
  -invoices
  -assemblings
  -findItem(id)
  -findInvoice(id)
  -findAssembling(id)
  +postInvoice(id)
  +completeInvoice(id)
  +startInventory(id)
  +finishInventory(id)
  +startMovementOrder(id)
  +finishMovementOrder(id)
}

class MovementOrder {
  +id
  +setStatus(EMovementOrderStatus)
}

enum EMovementOrderStatus {
  Open
  Closed
}

class Item {
  +id
  -name
  +getItemData(id)
}

class StockItem {
  +quantity
  +updateQuantity(id, quantity)
}

class Zone {
  +id,
  +stock_id,
  +getEmptyShelf()
  +getLocation(item)
}

class Section {
  +id,
  +section_id,
  +getEmptyShelf()
  +getLocation(item)
}

class Shelf {
  +id,
  +shelf_id,
  +isEmpty(): boolean
  +setState(state: ShelfState)
  +empty()
  +occupied()
}

interface ShelfState {
  +empty()
  +occupied()
}

class EmptyState implements ShelfState {
  +empty()
  +occupied()
}

class OccupiedState implements ShelfState {
  +empty()
  +occupied()
}

enum EInvoiceStatus {
  Closed
  Handling
  Pending
}

interface Invoice {
  +getTotalItems()
  +setStatus(EInvoiceStatus)
  +getItem(article, serial_no)
}

class ExpenditureInvoice {}

class ReceiptInvoice {}

class InvoiceLineItem {
  -quantity
  +getItems()
}

class Storekeeper {

}

enum EAssemblingStatus {
  Open
  Closed
}

class Assembling {
  -items: StockItem[]
  -observers: Observer[]
  +hasItem(stockItem)
  +addTarget(stockItem)
  +setAssemblingStatus(EAssemblingStatus.Open)
  +getitems()
  +setAssemblingStatus(EAssemblingStatus.Closed)
}

enum EInventoryStatus {
  Open
  Closed
}

class Inventory {
  +id
  -InventoryList
  -observers: Observer[]
  -strategy: InventoryStrategy
  -updateInventoryList()
  -prepareInventoryList()
  +setStatus(EInventoryStatus)
  +showInventoryList()
}

interface InvoiceFactory {
  +createInvoice(): Invoice
}

class ExpenditureInvoiceFactory {
  +createInvoice(): Invoice
}

class ReceiptInvoiceFactory {
  +createInvoice(): Invoice
}

class StockFacade {
  +postInvoice(id)
  +completeInvoice(id)
  +startInventory(id)
  +finishInventory(id)
  +startMovementOrder(id)
  +finishMovementOrder(id)
}

StockFacade --|> Stock
Storekeeper --|> StockFacade
Stock *-- Inventory
Stock *-- MovementOrder
MovementOrder o-- StockItem
MovementOrder o-- Shelf
Invoice *-- InvoiceLineItem
InvoiceLineItem o-- Item
StockItem o-- Item
Shelf *-- StockItem
Section *-- Shelf
Zone *-- Section
Stock *-- Zone
Assembling o-- StockItem
Stock *-- Assembling
Stock *-- StockItem
Invoice <|.. ExpenditureInvoice
Invoice <|.. ReceiptInvoice
EInvoiceStatus <.. Invoice
EInventoryStatus <.. Inventory
EMovementOrderStatus <.. MovementOrder
EAssemblingStatus <.. Assembling
InvoiceFactory <|.. ExpenditureInvoiceFactory
InvoiceFactory <|.. ReceiptInvoiceFactory
Shelf o-- ShelfState


@enduml
